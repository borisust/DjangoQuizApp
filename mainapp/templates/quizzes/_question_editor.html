{% load crispy_forms_tags %}
<h4>Question editor</h4>
<form action="{% url 'editQuestion' questionID=question.id %}" id="question_form" autocomplete="off">
    <div id="image_preview" >
        {% if question.image %}
            <img src="{{ question.image.url }}" alt="Image preview" class="img-thumbnail w-25" />
        {% endif %}
    </div>
    {% csrf_token %}
    {{form|crispy}}
    <h5>Answer options:</h5>
    <p class="text-muted">Note: if no answer option is set as correct, the question will not be graded.</p>
    <input type="hidden" name="answer_count" value="{{ answers.count }}" />
    <div id="answers">
        {% for answer in answers %}
            <div id="answer_{{ forloop.counter }}" class="row mb-3 collapse show">
                <label class="col col-form-label" for="answer_{{ forloop.counter }}_text">Answer {{ forloop.counter }}:</label>
                <div class="col-8 col-lg-9 col-xxl-10">
                    <input id="answer_{{ forloop.counter }}_text" class="textinput form-control" name="answer_{{ forloop.counter }}_text" type="text" maxlength="150" required="" value="{{ answer.text }}">
                </div>
                <div class="col pt-1">
                    <input id="answer_{{ forloop.counter }}_cb" class="checkboxinput form-check-input" type="checkbox" name="answer_{{ forloop.counter }}_is_correct"
                    {% if answer.is_correct %}
                        checked=""
                    {% endif %}
                    >
                    <label class="form-check-label" for="answer_{{ forloop.counter }}_cb">Correct</label>
                </div>
            </div>
        {% endfor %}
    </div>
    <div class="d-flex justify-content-center mt-2 pb-1">
        <div class="w-100 me-2"><button id="btn_add_answer" class="btn btn-success w-100" type="button" onclick="addAnswer()" >Add answer option</button></div>
        <div class="w-100 ms-2"><button id="btn_rm_answer" class="btn btn-danger w-100" type="button"  onclick="removeAnswer()" disabled >Remove answer option</button></div>
    </div>
    <button id="btn_add_question" type="submit" class="d-inline mt-2 btn btn-info">Save question</button>
    <button id="btn_cancel_edit" type="button" class="d-inline mt-2 btn btn-warning" onclick="cancelEdit()">Cancel</button>
    <span id="question_alert" class="ms-3 alert alert-danger" hidden="" ></span>
</form>
